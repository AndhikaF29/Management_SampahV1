<%- contentFor('body') %>

<div class="container py-4">
  <div class="row">
    <div class="col-md-8 mx-auto">
      <div class="card">
        <div class="card-header bg-white">
          <h5 class="mb-0">Profil Saya</h5>
        </div>
        <div class="card-body">
          <form action="/user/profile" method="POST">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>" />

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="nama" class="form-label">Nama Lengkap</label>
                <input
                  type="text"
                  class="form-control"
                  id="nama"
                  name="nama"
                  value="<%= user.nama %>"
                  required
                />
              </div>

              <div class="col-md-6 mb-3">
                <label for="email" class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  name="email"
                  value="<%= user.email %>"
                  readonly
                  title="Email tidak dapat diubah"
                />
                <small class="text-muted">Email tidak dapat diubah</small>
              </div>
            </div>

            <div class="mb-3">
              <label for="alamat" class="form-label">Alamat</label>
              <textarea class="form-control" id="alamat" name="alamat" rows="3">
<%= user.alamat || '' %></textarea
              >
            </div>

            <div class="mb-3">
              <label for="no_telp" class="form-label">Nomor Telepon</label>
              <input
                type="tel"
                class="form-control"
                id="no_telp"
                name="no_telp"
                value="<%= user.no_telp || '' %>"
              />
            </div>

            <div class="d-flex justify-content-between">
              <button type="submit" class="btn btn-success">
                <i class="fas fa-save me-1"></i> Simpan Perubahan
              </button>
              <a href="/user/change-password" class="btn btn-outline-primary">
                <i class="fas fa-key me-1"></i> Ganti Password
              </a>
            </div>
          </form>
        </div>
      </div>

      <!-- Informasi Akun -->
      <div class="card mt-4">
        <div class="card-header bg-white">
          <h6 class="mb-0">Informasi Akun</h6>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <p class="mb-2">
                <strong>Role:</strong>
                <span class="badge bg-primary"
                  ><%= user.role === 'admin' ? 'Administrator' : 'User' %></span
                >
              </p>
              <p class="mb-2"><strong>User ID:</strong> #<%= user.id %></p>
            </div>
            <div class="col-md-6">
              <p class="mb-2">
                <strong>Bergabung:</strong>
                <%= user.created_at ? new
                Date(user.created_at).toLocaleDateString('id-ID', {day:
                'numeric', month: 'long', year: 'numeric'}) : '-' %>
              </p>
              <p class="mb-2">
                <strong>Terakhir diperbarui:</strong>
                <%= user.updated_at ? new
                Date(user.updated_at).toLocaleDateString('id-ID', {day:
                'numeric', month: 'long', year: 'numeric'}) : '-' %>
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Statistik User -->
      <div class="card mt-4">
        <div class="card-header bg-white">
          <h6 class="mb-0">Statistik Setoran</h6>
        </div>
        <div class="card-body">
          <div class="row text-center">
            <div class="col-md-4">
              <div class="border-end">
                <h4 class="text-success mb-1">0</h4>
                <small class="text-muted">Total Setoran</small>
              </div>
            </div>
            <div class="col-md-4">
              <div class="border-end">
                <h4 class="text-success mb-1">0 kg</h4>
                <small class="text-muted">Total Berat</small>
              </div>
            </div>
            <div class="col-md-4">
              <h4 class="text-success mb-1">Rp 0</h4>
              <small class="text-muted">Total Pendapatan</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
